(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9674],{6126:function(e,t,a){Promise.resolve().then(a.bind(a,33058))},33058:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var r=a(57437),n=a(2265),s=a(27648),i=a(29827),l=a(11713),c=a(21770),d=a(92451),o=a(73247),u=a(45131),x=a(65302),m=a(42208),p=a(88906),g=a(4315),h=a(10407),f=a(12381),y=a(40279),N=a(71837);function v(){let e=(0,i.NL)(),[t,a]=(0,n.useState)(""),[v,b]=(0,n.useState)(1),[j,w]=(0,n.useState)(""),[E,R]=(0,n.useState)(""),[k,S]=(0,n.useState)(null),{data:I,isLoading:D,error:A}=(0,l.a)({queryKey:["admin-users",v,t,j,E],queryFn:async()=>{let e=new URLSearchParams({page:v.toString(),limit:"20"});return t&&e.append("search",t),j&&e.append("role",j),E&&e.append("status",E),(await N.hi.get("/admin/users?".concat(e.toString()))).data}}),T=(0,c.D)({mutationFn:async e=>{let{userId:t,isSuspended:a}=e;await N.hi.patch("/admin/users/".concat(t),{isSuspended:a})},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-users"]}),S(null)}}),C=(0,c.D)({mutationFn:async e=>{let{userId:t,role:a}=e;await N.hi.patch("/admin/users/".concat(t),{role:a})},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-users"]})}}),O=["USER","CREATOR","MENTOR","EMPLOYER","EDUCATION_PROVIDER","ADMIN"];return A?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-red-600",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(s.default,{href:"/admin",className:"text-gray-500 hover:text-gray-700",children:(0,r.jsx)(d.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"User Management"}),(0,r.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[null==I?void 0:I.pagination.total.toLocaleString()," total users"]})]})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,r.jsx)(y.I,{placeholder:"Search users...",value:t,onChange:e=>{a(e.target.value),b(1)},className:"pl-10"})]})}),(0,r.jsxs)("select",{value:j,onChange:e=>{w(e.target.value),b(1)},className:"px-3 py-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"All Roles"}),O.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{value:E,onChange:e=>{R(e.target.value),b(1)},className:"px-3 py-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"All Status"}),(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"suspended",children:"Suspended"})]})]})}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[D?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:null==I?void 0:I.users.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[e.avatar?(0,r.jsx)("img",{src:e.avatar,alt:"".concat(e.firstName," ").concat(e.lastName),className:"h-10 w-10 rounded-full"}):(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-purple-600 font-medium",children:[e.firstName[0],e.lastName[0]]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:[e.firstName," ",e.lastName]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("select",{value:e.role,onChange:t=>C.mutate({userId:e.id,role:t.target.value}),className:"text-sm px-2 py-1 border rounded bg-white dark:bg-gray-700",children:O.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e.isSuspended?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,r.jsx)(u.Z,{className:"h-3 w-3"})," Suspended"]}):(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,r.jsx)(x.Z,{className:"h-3 w-3"})," Active"]}),e.emailVerified&&(0,r.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Verified"})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,r.jsxs)("div",{children:[e._count.posts," posts"]}),(0,r.jsxs)("div",{children:[e._count.applications," applications"]})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(s.default,{href:"/dashboard/profile/".concat(e.id),className:"p-2 text-gray-500 hover:text-gray-700",title:"View Profile",children:(0,r.jsx)(m.Z,{className:"h-4 w-4"})}),e.isSuspended?(0,r.jsx)("button",{onClick:()=>T.mutate({userId:e.id,isSuspended:!1}),className:"p-2 text-green-600 hover:text-green-800",title:"Unsuspend User",children:(0,r.jsx)(p.Z,{className:"h-4 w-4"})}):(0,r.jsx)("button",{onClick:()=>T.mutate({userId:e.id,isSuspended:!0}),className:"p-2 text-red-600 hover:text-red-800",title:"Suspend User",children:(0,r.jsx)(g.Z,{className:"h-4 w-4"})})]})})]},e.id))})]}),I&&I.pagination.totalPages>1&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ",(v-1)*20+1," to ",Math.min(20*v,I.pagination.total)," of ",I.pagination.total]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(f.z,{variant:"outline",size:"sm",disabled:1===v,onClick:()=>b(v-1),children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("span",{className:"px-3 py-1 text-sm",children:["Page ",v," of ",I.pagination.totalPages]}),(0,r.jsx)(f.z,{variant:"outline",size:"sm",disabled:v===I.pagination.totalPages,onClick:()=>b(v+1),children:(0,r.jsx)(h.Z,{className:"h-4 w-4"})})]})]})]})]})]})}},12381:function(e,t,a){"use strict";a.d(t,{d:function(){return l},z:function(){return c}});var r=a(57437),n=a(2265),s=a(90535),i=a(93448);let l=(0,s.j)("inline-flex items-center justify-center rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary-500 text-white hover:bg-primary-600",secondary:"bg-secondary-500 text-white hover:bg-secondary-600",outline:"border-2 border-primary-500 text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-950",ghost:"hover:bg-gray-100 dark:hover:bg-gray-800",link:"text-primary-500 underline-offset-4 hover:underline",destructive:"bg-red-500 text-white hover:bg-red-600"},size:{default:"h-10 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-12 px-6 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:a,variant:n,size:s,...c}=e;return(0,r.jsx)("button",{className:(0,i.cn)(l({variant:n,size:s,className:a})),ref:t,...c})});c.displayName="Button"},40279:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var r=a(57437),n=a(2265),s=a(93448);let i=n.forwardRef((e,t)=>{let{className:a,type:n,error:i,label:l,icon:c,...d}=e;return(0,r.jsxs)("div",{className:"w-full",children:[l&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l}),(0,r.jsxs)("div",{className:"relative",children:[c&&(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c}),(0,r.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50",c&&"pl-10",i&&"border-red-500 focus:ring-red-500",a),ref:t,...d})]}),i&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i})]})});i.displayName="Input"},93448:function(e,t,a){"use strict";a.d(t,{C7:function(){return y},KI:function(){return i},MW:function(){return m},OF:function(){return c},Pp:function(){return h},Qm:function(){return g},SY:function(){return u},_6:function(){return f},aj:function(){return l},cn:function(){return d},hv:function(){return b},hw:function(){return p},lw:function(){return s},nJ:function(){return v},p6:function(){return o},wW:function(){return N},xG:function(){return x}});var r=a(61994),n=a(53335);function s(e,t){return window.localStorage.getItem(e)||t}function i(e,t){window.localStorage.setItem(e,t)}function l(){return window.localStorage.getItem("athena.locale")||window.navigator.language||"en-AU"}function c(){return s("athena.currency","AUD").toUpperCase()}function d(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,r.W)(t))}function o(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return new Date(e).toLocaleDateString(a,t||{year:"numeric",month:"short",day:"numeric"})}function u(e){let t=new Date,a=new Date(e),r=Math.floor((t.getTime()-a.getTime())/1e3);if(r<60)return"just now";let n=Math.floor(r/60);if(n<60)return"".concat(n,"m ago");let s=Math.floor(n/60);if(s<24)return"".concat(s,"h ago");let i=Math.floor(s/24);if(i<7)return"".concat(i,"d ago");let l=Math.floor(i/7);return l<4?"".concat(l,"w ago"):o(e)}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return new Intl.NumberFormat(a,{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function m(e,t){return e||t?e&&t?"".concat(x(e)," - ").concat(x(t)):e?"From ".concat(x(e)):t?"Up to ".concat(x(t)):"Salary not specified":"Salary not specified"}function p(e){return e?x(e):"Not specified"}function g(e,t){return"".concat(e.charAt(0)).concat(t.charAt(0)).toUpperCase()}function h(e,t){return"".concat(e," ").concat(t).trim()}function f(e,t,a){return 1===e?t:a||"".concat(t,"s")}let y={EARLY_CAREER:"Early Career",MID_CAREER:"Professional",ENTREPRENEUR:"Entrepreneur",CREATOR:"Creator",MENTOR:"Mentor",EDUCATION_PROVIDER:"Education Provider",EMPLOYER:"Employer",REAL_ESTATE:"Real Estate",GOVERNMENT_NGO:"Government / NGO"},N={FULL_TIME:"Full-time",PART_TIME:"Part-time",CONTRACT:"Contract",FREELANCE:"Freelance",INTERNSHIP:"Internship"},v={PENDING:"Pending",REVIEWED:"Reviewed",SHORTLISTED:"Shortlisted",INTERVIEW:"Interview",OFFERED:"Offered",HIRED:"Hired",REJECTED:"Rejected",WITHDRAWN:"Withdrawn"},b={PENDING:"bg-yellow-100 text-yellow-800",REVIEWED:"bg-blue-100 text-blue-800",SHORTLISTED:"bg-purple-100 text-purple-800",INTERVIEW:"bg-indigo-100 text-indigo-800",OFFERED:"bg-green-100 text-green-800",HIRED:"bg-emerald-100 text-emerald-800",REJECTED:"bg-red-100 text-red-800",WITHDRAWN:"bg-gray-100 text-gray-800"}}},function(e){e.O(0,[2972,3464,6137,5021,1713,4573,1837,2971,2117,1744],function(){return e(e.s=6126)}),_N_E=e.O()}]);