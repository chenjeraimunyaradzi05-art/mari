(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7824],{6039:function(e,a,r){Promise.resolve().then(r.bind(r,83945))},33245:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});let s=(0,r(39763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},15863:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});let s=(0,r(39763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},84286:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});let s=(0,r(39763).Z)("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},92369:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});let s=(0,r(39763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},27648:function(e,a,r){"use strict";r.d(a,{default:function(){return t.a}});var s=r(72972),t=r.n(s)},99376:function(e,a,r){"use strict";var s=r(35475);r.o(s,"useParams")&&r.d(a,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(a,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(a,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(a,{useSearchParams:function(){return s.useSearchParams}})},83945:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return N}});var s=r(57437),t=r(2265),l=r(72967),d=r(55710),n=r(27648),c=r(99376),i=r(52519),o=r(54761);function u(){let{data:e,isLoading:a}=(0,l.Z5)(),{conversations:r,setConversations:u,activeConversationId:x}=(0,i.a)(),m=(0,c.usePathname)();return((0,t.useEffect)(()=>{e&&u(e.map(e=>({id:e.id,participants:[e.participant].map(e=>({id:e.id,name:"".concat(e.firstName," ").concat(e.lastName),avatar:e.avatar||void 0})),lastMessage:e.lastMessage?{id:"temp-id",senderId:e.lastMessage.senderId,content:e.lastMessage.content,createdAt:e.lastMessage.createdAt,type:"text"}:void 0,unreadCount:e.unreadCount,updatedAt:e.updatedAt})))},[e,u]),a&&0===r.length)?(0,s.jsx)("div",{className:"p-4 space-y-4",children:[1,2,3,4,5].map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(o.Od,{className:"w-10 h-10 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(o.Od,{className:"h-3 w-2/3"}),(0,s.jsx)(o.Od,{className:"h-3 w-1/2"})]})]},e))}):0===r.length?(0,s.jsx)("div",{className:"p-4 text-gray-500",children:"No conversations yet."}):(0,s.jsxs)("div",{className:"flex flex-col h-full border-r border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 w-full max-w-xs overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800",children:(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Messages"})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:r.map(e=>{let a=m==="/dashboard/messages/".concat(e.id)||x===e.id,r=e.participants[0]||{name:"Unknown",avatar:void 0},t=r.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,s.jsx)(n.default,{href:"/dashboard/messages/".concat(e.id),className:"block p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors ".concat(a?"bg-blue-50 border-l-4 border-l-blue-600":""),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"relative",children:r.avatar?(0,s.jsx)("img",{src:r.avatar,alt:r.name,className:"w-10 h-10 rounded-full object-cover"}):(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 font-bold",children:t})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:r.name}),e.lastMessage&&(0,s.jsx)("span",{className:"text-xs text-gray-400",children:(0,d.Q)(new Date(e.lastMessage.createdAt),{addSuffix:!1})})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,s.jsx)("p",{className:"text-sm truncate ".concat(e.unreadCount>0?"font-semibold text-gray-900":"text-gray-500"),children:e.lastMessage?e.lastMessage.content:"Started a conversation"}),e.unreadCount>0&&(0,s.jsx)("span",{className:"ml-2 bg-blue-600 text-white text-xs font-bold px-2 py-0.5 rounded-full",children:e.unreadCount})]})]})]})},e.id)})})]})}var x=r(33245),m=r(84286),f=r(92369),h=r(76980),g=r(53113),b=r(96246),y=r(69174),j=r(12381),v=r(93448);function p(){var e,a;let{activeConversationId:r,conversations:t}=(0,i.a)(),l=t.find(e=>e.id===r),d=null==l?void 0:null===(e=l.participants)||void 0===e?void 0:e[0];return l&&d?(0,s.jsxs)("div",{className:"h-full flex flex-col border-l border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900",children:[(0,s.jsxs)("div",{className:"p-5 border-b border-gray-200 dark:border-gray-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(b.qE,{src:d.avatar,fallback:(null===(a=d.name)||void 0===a?void 0:a.slice(0,2).toUpperCase())||"U",className:"w-12 h-12"}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"text-base font-semibold text-gray-900 dark:text-white truncate",children:d.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active now"})]})]}),(0,s.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,s.jsxs)(y.C,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400",children:[(0,s.jsx)(m.Z,{className:"w-3 h-3 mr-1"})," Safety Verified"]}),(0,s.jsxs)(y.C,{className:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[(0,s.jsx)(f.Z,{className:"w-3 h-3 mr-1"})," Community Member"]})]})]}),(0,s.jsxs)("div",{className:"p-5 space-y-6 overflow-y-auto",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-widest text-gray-400 dark:text-gray-500",children:"Actions"}),(0,s.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,s.jsxs)(n.default,{href:"/dashboard/profile/".concat(d.id),className:(0,v.cn)((0,j.d)({variant:"outline"}),"w-full justify-start"),children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-2"})," View Profile"]}),(0,s.jsxs)(j.z,{variant:"outline",className:"w-full justify-start",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4 mr-2"})," Share Files"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-widest text-gray-400 dark:text-gray-500",children:"Shared Media"}),(0,s.jsx)("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[1,2,3,4,5,6].map(e=>(0,s.jsx)("div",{className:"aspect-square rounded-lg border border-dashed border-gray-200 dark:border-gray-700 flex items-center justify-center text-gray-400",children:(0,s.jsx)(g.Z,{className:"w-4 h-4"})},e))})]})]})]}):(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 p-6",children:[(0,s.jsx)(x.Z,{className:"w-8 h-8 mb-2"}),(0,s.jsx)("p",{className:"text-sm",children:"Select a conversation to see details."})]})}function N(e){let{children:a}=e;return(0,s.jsxs)("div",{className:"flex h-[calc(100vh-64px)] overflow-hidden",children:[(0,s.jsx)("div",{className:"w-80 flex-shrink-0 h-full border-r border-gray-200 dark:border-gray-800",children:(0,s.jsx)(u,{})}),(0,s.jsx)("div",{className:"flex-1 h-full relative",children:a}),(0,s.jsx)("div",{className:"hidden xl:block w-80 flex-shrink-0 h-full",children:(0,s.jsx)(p,{})})]})}},96246:function(e,a,r){"use strict";r.d(a,{qE:function(){return c}});var s=r(57437),t=r(2265),l=r(93448);let d={xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-base",lg:"w-12 h-12 text-lg",xl:"w-16 h-16 text-xl"},n={xs:"w-1.5 h-1.5 border",sm:"w-2 h-2 border",md:"w-2.5 h-2.5 border-2",lg:"w-3 h-3 border-2",xl:"w-4 h-4 border-2"},c=t.forwardRef((e,a)=>{let{src:r,alt:t="Avatar",fallback:c="?",size:i="md",className:o,online:u,children:x,...m}=e;return x?(0,s.jsxs)("div",{ref:a,className:(0,l.cn)("relative flex shrink-0 overflow-hidden rounded-full",d[i],o),...m,children:[x,void 0!==u&&(0,s.jsx)("span",{className:(0,l.cn)("absolute bottom-0 right-0 rounded-full border-white dark:border-gray-900",u?"bg-green-500":"bg-gray-400",n[i])})]}):(0,s.jsxs)("div",{ref:a,className:(0,l.cn)("relative inline-block",o),...m,children:[r?(0,s.jsx)("img",{src:r,alt:t,className:(0,l.cn)("rounded-full object-cover",d[i])}):(0,s.jsx)("div",{className:(0,l.cn)("rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center text-primary-600 font-semibold",d[i]),children:c}),void 0!==u&&(0,s.jsx)("span",{className:(0,l.cn)("absolute bottom-0 right-0 rounded-full border-white dark:border-gray-900",u?"bg-green-500":"bg-gray-400",n[i])})]})});c.displayName="Avatar",t.forwardRef((e,a)=>{let{className:r,src:d,alt:n,onLoadingStatusChange:c,...i}=e,[o,u]=t.useState("loading");return(t.useEffect(()=>{if(!d){u("error");return}u("loading")},[d]),"error"!==o&&d)?(0,s.jsx)("img",{ref:a,src:d,alt:n,onLoad:()=>{u("loaded"),null==c||c("loaded")},onError:()=>{u("error"),null==c||c("error")},className:(0,l.cn)("aspect-square h-full w-full object-cover",r),...i}):null}).displayName="AvatarImage",t.forwardRef((e,a)=>{let{className:r,children:d,delayMs:n,...c}=e,[i,o]=t.useState(void 0===n);return(t.useEffect(()=>{if(void 0!==n){let e=setTimeout(()=>o(!0),n);return()=>clearTimeout(e)}},[n]),i)?(0,s.jsx)("span",{ref:a,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 font-medium",r),...c,children:d}):null}).displayName="AvatarFallback"},69174:function(e,a,r){"use strict";r.d(a,{C:function(){return n}});var s=r(57437);r(2265);var t=r(90535),l=r(93448);let d=(0,t.j)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{variants:{variant:{default:"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200",secondary:"bg-secondary-100 text-secondary-800 dark:bg-secondary-900 dark:text-secondary-200",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",danger:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",destructive:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",outline:"border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400"}},defaultVariants:{variant:"default"}});function n(e){let{className:a,variant:r,...t}=e;return(0,s.jsx)("span",{className:(0,l.cn)(d({variant:r}),a),...t})}},54761:function(e,a,r){"use strict";r.d(a,{$j:function(){return d},Od:function(){return c},Q3:function(){return o},gb:function(){return n},q4:function(){return i}});var s=r(57437),t=r(15863),l=r(93448);function d(e){let{size:a="md",className:r}=e;return(0,s.jsx)(t.Z,{className:(0,l.cn)("animate-spin text-primary-500",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-10 h-10"}[a],r)})}function n(e){let{message:a="Loading...",fullScreen:r=!1}=e,t=(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,s.jsx)(d,{size:"lg"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:a})]});return r?(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-white/80 dark:bg-gray-950/80 backdrop-blur-sm z-50",children:t}):(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:t})}function c(e){let{className:a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("animate-pulse rounded bg-gray-200 dark:bg-gray-700",a)})}function i(){return(0,s.jsx)("div",{className:"rounded-xl bg-white dark:bg-gray-900 p-6 shadow-sm border border-gray-100 dark:border-gray-800",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)(c,{className:"w-12 h-12 rounded-lg"}),(0,s.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,s.jsx)(c,{className:"h-4 w-3/4"}),(0,s.jsx)(c,{className:"h-3 w-1/2"}),(0,s.jsx)(c,{className:"h-3 w-2/3"})]})]})})}function o(){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(c,{className:"h-48 w-full rounded-xl"}),(0,s.jsxs)("div",{className:"flex items-end -mt-16 px-6",children:[(0,s.jsx)(c,{className:"w-24 h-24 rounded-full border-4 border-white dark:border-gray-900"}),(0,s.jsxs)("div",{className:"ml-4 pb-2 space-y-2",children:[(0,s.jsx)(c,{className:"h-6 w-40"}),(0,s.jsx)(c,{className:"h-4 w-32"})]})]}),(0,s.jsxs)("div",{className:"px-6 space-y-4",children:[(0,s.jsx)(c,{className:"h-4 w-full"}),(0,s.jsx)(c,{className:"h-4 w-5/6"}),(0,s.jsx)(c,{className:"h-4 w-4/6"})]})]})}}},function(e){e.O(0,[2972,3464,6137,5021,1713,9064,5883,2020,5710,1837,2967,2538,2971,2117,1744],function(){return e(e.s=6039)}),_N_E=e.O()}]);