(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5146],{69953:function(e,t,r){Promise.resolve().then(r.bind(r,86722))},27648:function(e,t,r){"use strict";r.d(t,{default:function(){return n.a}});var a=r(72972),n=r.n(a)},86722:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var a=r(57437),n=r(2265),s=r(27648),i=r(71837),o=r(93448);function l(){let[e,t]=(0,n.useState)([]),[r,l]=(0,n.useState)(!0),[d,c]=(0,n.useState)(!1),[u,x]=(0,n.useState)(null),[g,m]=(0,n.useState)({organizationId:"",amount:"",currency:"AUD",type:"PAYMENT",status:"PENDING",provider:"",reference:""}),[y,h]=(0,n.useState)(null),[f,p]=(0,n.useState)({status:"PENDING",provider:"",reference:""});(0,n.useEffect)(()=>{let e=!0;return(async()=>{try{var r;let a=await i.hi.get("/money/transactions");if(!e)return;t((null===(r=a.data)||void 0===r?void 0:r.data)||[])}catch(r){if(!e)return;t([])}finally{e&&l(!1)}})(),()=>{e=!1}},[]);let v=async()=>{var e;t((null===(e=(await i.hi.get("/money/transactions")).data)||void 0===e?void 0:e.data)||[])},b=async()=>{let r=Number(g.amount||0);if(!Number.isFinite(r)||r<=0){x("Amount must be greater than 0");return}c(!0),x(null),t([{id:"tmp-".concat(Date.now()),createdAt:new Date().toISOString(),type:g.type,amount:r,currency:g.currency,status:g.status},...e]);try{await i.hi.post("/money/transactions",{organizationId:g.organizationId||void 0,amount:r,currency:g.currency,type:g.type,status:g.status,provider:g.provider||void 0,reference:g.reference||void 0}),m({organizationId:"",amount:"",currency:"AUD",type:"PAYMENT",status:"PENDING",provider:"",reference:""}),await v()}catch(r){var a,n;t(e),x((null==r?void 0:null===(n=r.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.error)||"Failed to create transaction")}finally{c(!1)}},N=async(r,a)=>{t(e.map(e=>e.id===r?{...e,status:a}:e));try{await i.hi.patch("/money/transactions/".concat(r),{status:a}),await v()}catch(r){var n,s;t(e),x((null==r?void 0:null===(s=r.response)||void 0===s?void 0:null===(n=s.data)||void 0===n?void 0:n.error)||"Failed to update transaction")}},E=async r=>{if(confirm("Delete this transaction?")){t(e.filter(e=>e.id!==r));try{await i.hi.delete("/money/transactions/".concat(r)),await v()}catch(r){var a,n;t(e),x((null==r?void 0:null===(n=r.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.error)||"Failed to delete transaction")}}},j=e=>{h(e.id),p({status:e.status||"PENDING",provider:e.provider||"",reference:e.reference||""})},w=async()=>{if(y){t(e.map(e=>e.id===y?{...e,status:f.status,provider:f.provider,reference:f.reference}:e));try{await i.hi.patch("/money/transactions/".concat(y),{status:f.status,provider:f.provider||void 0,reference:f.reference||void 0}),h(null),await v()}catch(n){var r,a;t(e),x((null==n?void 0:null===(a=n.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.error)||"Failed to update transaction")}}};return(0,a.jsxs)("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Money Ledger"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Review payments, payouts, and adjustments."})]}),(0,a.jsx)(s.default,{href:"/dashboard/finance",className:"text-sm text-primary-600 hover:underline",children:"Back to Finance Hub"})]}),(0,a.jsxs)("div",{className:"card",children:[u&&(0,a.jsx)("div",{className:"mb-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:u}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Organization ID (optional)"}),(0,a.jsx)("input",{value:g.organizationId,onChange:e=>m({...g,organizationId:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amount"}),(0,a.jsx)("input",{value:g.amount,onChange:e=>m({...g,amount:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Currency"}),(0,a.jsx)("input",{value:g.currency,onChange:e=>m({...g,currency:e.target.value.toUpperCase()}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type"}),(0,a.jsx)("select",{value:g.type,onChange:e=>m({...g,type:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",children:["PAYMENT","REFUND","PAYOUT","TRANSFER","ADJUSTMENT"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status"}),(0,a.jsx)("select",{value:g.status,onChange:e=>m({...g,status:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",children:["PENDING","COMPLETED","FAILED","CANCELED"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Provider"}),(0,a.jsx)("input",{value:g.provider,onChange:e=>m({...g,provider:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reference"}),(0,a.jsx)("input",{value:g.reference,onChange:e=>m({...g,reference:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]})]}),(0,a.jsx)("button",{className:"btn-primary",onClick:b,disabled:d,children:d?"Saving...":"Create Transaction"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Transactions"})}),r?(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading transactions..."}):0===e.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No transactions logged."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Date"}),(0,a.jsx)("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Type"}),(0,a.jsx)("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Amount"}),(0,a.jsx)("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Status"}),(0,a.jsx)("th",{className:"text-right py-2 text-xs font-semibold text-gray-500",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:e.slice(0,8).map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[(0,a.jsx)("td",{className:"py-2 text-sm text-gray-900 dark:text-white",children:(0,o.p6)(e.createdAt)}),(0,a.jsx)("td",{className:"py-2 text-sm text-gray-600 dark:text-gray-300",children:e.type}),(0,a.jsx)("td",{className:"py-2 text-sm text-gray-600 dark:text-gray-300",children:(0,o.xG)(e.amount||0,e.currency||"AUD")}),(0,a.jsx)("td",{className:"py-2 text-xs text-gray-500 dark:text-gray-400",children:y===e.id?(0,a.jsx)("select",{value:f.status,onChange:e=>p({...f,status:e.target.value}),className:"rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-2 py-1 text-xs",children:["PENDING","COMPLETED","FAILED","CANCELED"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))}):e.status}),(0,a.jsx)("td",{className:"py-2 text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[y===e.id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:w,className:"text-xs text-primary-600 hover:underline",children:"Save"}),(0,a.jsx)("button",{onClick:()=>h(null),className:"text-xs text-gray-500 hover:underline",children:"Cancel"})]}):(0,a.jsxs)(a.Fragment,{children:["COMPLETED"!==e.status&&(0,a.jsx)("button",{onClick:()=>N(e.id,"COMPLETED"),className:"text-xs text-primary-600 hover:underline",children:"Mark Completed"}),(0,a.jsx)("button",{onClick:()=>j(e),className:"text-xs text-gray-600 hover:underline",children:"Edit"})]}),(0,a.jsx)("button",{onClick:()=>E(e.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]})})]},e.id))})]})})]})]})}},93448:function(e,t,r){"use strict";r.d(t,{C7:function(){return p},KI:function(){return i},MW:function(){return g},OF:function(){return l},Pp:function(){return h},Qm:function(){return y},SY:function(){return u},_6:function(){return f},aj:function(){return o},cn:function(){return d},hv:function(){return N},hw:function(){return m},lw:function(){return s},nJ:function(){return b},p6:function(){return c},wW:function(){return v},xG:function(){return x}});var a=r(61994),n=r(53335);function s(e,t){return window.localStorage.getItem(e)||t}function i(e,t){window.localStorage.setItem(e,t)}function o(){return window.localStorage.getItem("athena.locale")||window.navigator.language||"en-AU"}function l(){return s("athena.currency","AUD").toUpperCase()}function d(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o();return new Date(e).toLocaleDateString(r,t||{year:"numeric",month:"short",day:"numeric"})}function u(e){let t=new Date,r=new Date(e),a=Math.floor((t.getTime()-r.getTime())/1e3);if(a<60)return"just now";let n=Math.floor(a/60);if(n<60)return"".concat(n,"m ago");let s=Math.floor(n/60);if(s<24)return"".concat(s,"h ago");let i=Math.floor(s/24);if(i<7)return"".concat(i,"d ago");let o=Math.floor(i/7);return o<4?"".concat(o,"w ago"):c(e)}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o();return new Intl.NumberFormat(r,{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function g(e,t){return e||t?e&&t?"".concat(x(e)," - ").concat(x(t)):e?"From ".concat(x(e)):t?"Up to ".concat(x(t)):"Salary not specified":"Salary not specified"}function m(e){return e?x(e):"Not specified"}function y(e,t){return"".concat(e.charAt(0)).concat(t.charAt(0)).toUpperCase()}function h(e,t){return"".concat(e," ").concat(t).trim()}function f(e,t,r){return 1===e?t:r||"".concat(t,"s")}let p={EARLY_CAREER:"Early Career",MID_CAREER:"Professional",ENTREPRENEUR:"Entrepreneur",CREATOR:"Creator",MENTOR:"Mentor",EDUCATION_PROVIDER:"Education Provider",EMPLOYER:"Employer",REAL_ESTATE:"Real Estate",GOVERNMENT_NGO:"Government / NGO"},v={FULL_TIME:"Full-time",PART_TIME:"Part-time",CONTRACT:"Contract",FREELANCE:"Freelance",INTERNSHIP:"Internship"},b={PENDING:"Pending",REVIEWED:"Reviewed",SHORTLISTED:"Shortlisted",INTERVIEW:"Interview",OFFERED:"Offered",HIRED:"Hired",REJECTED:"Rejected",WITHDRAWN:"Withdrawn"},N={PENDING:"bg-yellow-100 text-yellow-800",REVIEWED:"bg-blue-100 text-blue-800",SHORTLISTED:"bg-purple-100 text-purple-800",INTERVIEW:"bg-indigo-100 text-indigo-800",OFFERED:"bg-green-100 text-green-800",HIRED:"bg-emerald-100 text-emerald-800",REJECTED:"bg-red-100 text-red-800",WITHDRAWN:"bg-gray-100 text-gray-800"}}},function(e){e.O(0,[2972,3464,6137,1837,2971,2117,1744],function(){return e(e.s=69953)}),_N_E=e.O()}]);