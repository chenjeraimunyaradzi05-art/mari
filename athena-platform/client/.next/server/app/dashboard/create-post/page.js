(()=>{var e={};e.id=2942,e.ids=[2942],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},12078:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(57169),r(22834),r(77972),r(10704),r(7629),r(11930),r(12523);var s=r(23191),a=r(88716),i=r(37922),n=r.n(i),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["dashboard",{children:["create-post",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,57169)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\create-post\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,22834)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,77972)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,10704)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\not-found.tsx"]}],c=["C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\create-post\\page.tsx"],p="/dashboard/create-post/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/create-post/page",pathname:"/dashboard/create-post",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63823:(e,t,r)=>{Promise.resolve().then(r.bind(r,82683))},71709:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},75290:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},69436:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},49758:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},82683:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(10326),a=r(17577),i=r(90434),n=r(35047),l=r(71709),o=r(49758),d=r(75290),c=r(69436),p=r(90422),u=r(18069);function m(){let e=(0,n.useRouter)(),{user:t}=(0,p.tN)(),r=(0,p.fj)(),[m,x]=(0,a.useState)(""),[h,g]=(0,a.useState)(!0),[y,b]=(0,a.useState)("TEXT"),[f,v]=(0,a.useState)([]),[k,j]=(0,a.useState)(!1),[P,N]=(0,a.useState)(null),q=e=>{let t=document.createElement("input");t.type="file",t.accept=e,t.onchange=async()=>{let e=t.files?.[0];if(e)try{j(!0),N(null);let t=e.type.startsWith("video/")?"video":"post",r=await u.XF.upload(t,e),s=r.data?.data?.url;s&&(v([s]),b("video"===t?"VIDEO":"IMAGE"))}catch(e){N(e?.response?.data?.message||"Failed to upload media")}finally{j(!1)}},t.click()},w=async t=>{if(t.preventDefault(),N(null),!m.trim()){N("Please enter a post before publishing.");return}try{await r.mutateAsync({content:m.trim(),isPublic:h,type:y,mediaUrls:f.length?f:void 0}),x(""),v([]),b("TEXT"),e.push("/dashboard/community")}catch(e){N(e?.response?.data?.message||"Failed to create post")}};return t?(0,s.jsxs)("div",{className:"p-6 max-w-3xl",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create Post"}),s.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Share an update with the community."}),(0,s.jsxs)("form",{onSubmit:w,className:"mt-6 space-y-4",children:[s.jsx("textarea",{value:m,onChange:e=>x(e.target.value),placeholder:"Whatâ€™s on your mind?",className:"w-full min-h-[160px] rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-3 focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsxs)("button",{type:"button",className:"btn-outline inline-flex items-center gap-2",onClick:()=>q("image/*"),disabled:k,children:[s.jsx(l.Z,{className:"w-4 h-4"}),"Add image"]}),(0,s.jsxs)("button",{type:"button",className:"btn-outline inline-flex items-center gap-2",onClick:()=>q("video/*"),disabled:k,children:[s.jsx(o.Z,{className:"w-4 h-4"}),"Add video"]}),k&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 text-sm text-gray-500",children:[s.jsx(d.Z,{className:"w-4 h-4 animate-spin"})," Uploading..."]})]}),f.length>0&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Attached: ","VIDEO"===y?"Video":"Image"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("input",{type:"checkbox",checked:h,onChange:e=>g(e.target.checked),className:"h-4 w-4"}),"Post publicly"]}),P&&s.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 text-red-600 px-3 py-2 text-sm",children:P}),(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx("button",{type:"submit",className:"btn-primary inline-flex items-center gap-2",disabled:r.isPending||k,children:r.isPending?(0,s.jsxs)(s.Fragment,{children:[s.jsx(d.Z,{className:"w-4 h-4 animate-spin"})," Posting..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(c.Z,{className:"w-4 h-4"})," Post"]})}),s.jsx("button",{type:"button",className:"btn-outline",onClick:()=>e.back(),children:"Cancel"})]})]})]}):(0,s.jsxs)("div",{className:"p-6 max-w-3xl",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create Post"}),s.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Please sign in to publish a post."}),s.jsx(i.default,{href:"/login",className:"btn-primary mt-4 inline-flex",children:"Go to Login"})]})}},57169:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\mutir\OneDrive\Desktop\mari\athena-platform\client\src\app\dashboard\create-post\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[2145,108,8759,9835,422,5877],()=>r(12078));module.exports=s})();