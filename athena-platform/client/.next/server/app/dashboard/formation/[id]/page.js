(()=>{var e={};e.id=1739,e.ids=[1739],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},69643:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>m,routeModule:()=>c,tree:()=>o}),t(68898),t(22834),t(77972),t(10704),t(7629),t(11930),t(12523);var r=t(23191),a=t(88716),i=t(37922),n=t.n(i),l=t(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let o=["",{children:["dashboard",{children:["formation",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,68898)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\formation\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,22834)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,77972)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,10704)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\not-found.tsx"]}],m=["C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\formation\\[id]\\page.tsx"],u="/dashboard/formation/[id]/page",p={require:t,loadChunk:()=>Promise.resolve()},c=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/formation/[id]/page",pathname:"/dashboard/formation/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},20892:(e,s,t)=>{Promise.resolve().then(t.bind(t,13243))},13243:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(10326),a=t(17577),i=t(90434),n=t(35047),l=t(90422),d=t(51223);function o(e){return e&&"object"==typeof e&&!Array.isArray(e)?e:{}}function m(){let e=(0,n.useParams)(),s=e?.id||"",{data:t,isLoading:m}=(0,l.dl)(s),u=(0,l.zJ)(),p=(0,l.mz)();(0,a.useMemo)(()=>t?.businessName||t?.data?.businessName||"",[t]),(0,a.useMemo)(()=>{let e=o(t?.data),s=e.directors,r=(Array.isArray(s)?s:[]).map(e=>{if("string"==typeof e)return e;let s=o(e);return"string"==typeof s.name?s.name:""}).map(e=>e.trim()).filter(Boolean).join("\n"),a=(o(e.registeredAddress).line1||o(e.businessAddress).line1||o(e.principalPlaceOfBusiness).line1||o(e.address).line1,o(e.registeredAddress)),i=o(a);return{directorsText:r,addressLine1:"string"==typeof i.line1?i.line1:"",addressCity:"string"==typeof i.city?i.city:"",addressState:"string"==typeof i.state?i.state:"",addressPostcode:"string"==typeof i.postcode?i.postcode:"",addressCountry:"string"==typeof i.country?i.country:""}},[t]),(0,a.useMemo)(()=>{let e=o(t?.data).partners;return{partnersText:(Array.isArray(e)?e:[]).map(e=>{if("string"==typeof e)return e;let s=o(e);return"string"==typeof s.name?s.name:""}).map(e=>e.trim()).filter(Boolean).join("\n")}},[t]),(0,a.useMemo)(()=>{let e=o(t?.data).trustees;return{trusteesText:(Array.isArray(e)?e:[]).map(e=>{if("string"==typeof e)return e;let s=o(e);return"string"==typeof s.name?s.name:""}).map(e=>e.trim()).filter(Boolean).join("\n")}},[t]);let[c,x]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[b,f]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[N,v]=(0,a.useState)(""),[P,A]=(0,a.useState)(""),[C,S]=(0,a.useState)(""),[D,k]=(0,a.useState)(""),[q,w]=(0,a.useState)(""),T=t?.status==="DRAFT"||t?.status==="NEEDS_INFO",O=(0,a.useMemo)(()=>{let e=t?.type==="COMPANY",s=t?.type==="PARTNERSHIP",r=t?.type==="TRUST",a=t?.type==="SOLE_TRADER",i=c.trim().length>0,n=h.split(/\r?\n/).map(e=>e.trim()).filter(Boolean).length,l=D.split(/\r?\n/).map(e=>e.trim()).filter(Boolean).length,d=q.split(/\r?\n/).map(e=>e.trim()).filter(Boolean).length,o=b.trim().length>0||y.trim().length>0||N.trim().length>0||P.trim().length>0||C.trim().length>0,m=[];i||m.push("Business name"),e&&(0===n&&m.push("At least 1 director"),o||m.push("Registered address")),s&&0===l&&m.push("At least 1 partner"),r&&0===d&&m.push("At least 1 trustee");let u=[];a&&u.push("Sole Trader: currently only business name is required for submission."),T||u.push("This registration is not editable in its current status.");let p=[{label:"Business name",ok:i}];return e&&(p.push({label:"At least 1 director",ok:n>0}),p.push({label:"Registered address",ok:o})),s&&p.push({label:"At least 1 partner",ok:l>0}),r&&p.push({label:"At least 1 trustee",ok:d>0}),{checks:p,missing:m,notes:u,isCompany:e,isPartnership:s,isTrust:r,isSoleTrader:a}},[t?.type,T,c,h,D,q,b,y,N,P,C]),R=async()=>{let e=o(t?.data),r=t?.type==="COMPANY",a=t?.type==="PARTNERSHIP",i=t?.type==="TRUST",n=h.split(/\r?\n/).map(e=>e.trim()).filter(Boolean),l=D.split(/\r?\n/).map(e=>e.trim()).filter(Boolean),d=q.split(/\r?\n/).map(e=>e.trim()).filter(Boolean),m={line1:b.trim(),city:y.trim(),state:N.trim(),postcode:P.trim(),country:C.trim()};await p.mutateAsync({id:s,data:{...e,businessName:c,...r?{directors:n,registeredAddress:m}:null,...a?{partners:l}:null,...i?{trustees:d}:null}})},_=async()=>{T&&await R(),await u.mutateAsync(s)};return m?r.jsx("div",{className:"py-8 text-sm text-muted-foreground",children:"Loading…"}):t?(0,r.jsxs)("div",{className:"max-w-3xl space-y-6 py-8",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx(i.default,{href:"/dashboard/formation",className:"text-sm text-primary hover:underline",children:"← Back"}),r.jsx("h1",{className:"text-2xl font-bold",children:t.businessName||"Untitled registration"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.type," • Status: ",t.status,t.updatedAt?` • Updated ${(0,d.SY)(t.updatedAt)}`:""]})]}),r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-muted text-muted-foreground",children:t.status})]}),(0,r.jsxs)("div",{className:"border rounded-lg p-6 space-y-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Business name"}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Name"}),r.jsx("input",{type:"text",value:c,onChange:e=>x(e.target.value),disabled:!T||p.isPending,className:"w-full p-2 border rounded-md disabled:opacity-50",placeholder:"e.g. Athena Consulting"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:R,disabled:!T||p.isPending,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 disabled:opacity-50",children:p.isPending?"Saving…":"Save"}),r.jsx("button",{type:"button",onClick:_,disabled:!T||u.isPending||p.isPending,className:"px-4 py-2 border rounded-md hover:bg-gray-50 disabled:opacity-50",children:u.isPending?"Submitting…":"Submit"})]}),!T&&r.jsx("p",{className:"text-xs text-muted-foreground",children:"This registration can’t be submitted in its current status."})]}),(0,r.jsxs)("div",{className:"border rounded-lg p-6 space-y-3",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Observations"}),O.notes.length>0&&r.jsx("div",{className:"text-sm text-muted-foreground space-y-1",children:O.notes.map(e=>r.jsx("div",{children:e},e))}),r.jsx("div",{className:"grid gap-2",children:O.checks.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("span",{className:"text-sm",children:e.label}),r.jsx("span",{className:"text-sm",children:e.ok?"✓":"—"})]},e.label))}),0===O.missing.length?r.jsx("p",{className:"text-sm text-muted-foreground",children:"Looks ready to submit."}):(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Likely to fail submission until fixed: ",O.missing.join(", "),"."]})]}),"COMPANY"===t.type&&(0,r.jsxs)("div",{className:"border rounded-lg p-6 space-y-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Company minimum fields"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Directors and a registered address are required before submission."}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Directors (one per line)"}),r.jsx("textarea",{value:h,onChange:e=>g(e.target.value),disabled:!T||p.isPending,className:"w-full min-h-24 p-2 border rounded-md disabled:opacity-50",placeholder:"Jane Doe\\nAisha Khan"})]}),(0,r.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Address line 1"}),r.jsx("input",{type:"text",value:b,onChange:e=>f(e.target.value),disabled:!T||p.isPending,className:"w-full p-2 border rounded-md disabled:opacity-50",placeholder:"123 Example St"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"City"}),r.jsx("input",{type:"text",value:y,onChange:e=>j(e.target.value),disabled:!T||p.isPending,className:"w-full p-2 border rounded-md disabled:opacity-50"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"State"}),r.jsx("input",{type:"text",value:N,onChange:e=>v(e.target.value),disabled:!T||p.isPending,className:"w-full p-2 border rounded-md disabled:opacity-50"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Postcode"}),r.jsx("input",{type:"text",value:P,onChange:e=>A(e.target.value),disabled:!T||p.isPending,className:"w-full p-2 border rounded-md disabled:opacity-50"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Country"}),r.jsx("input",{type:"text",value:C,onChange:e=>S(e.target.value),disabled:!T||p.isPending,className:"w-full p-2 border rounded-md disabled:opacity-50",placeholder:"Australia"})]})]})]}),"PARTNERSHIP"===t.type&&(0,r.jsxs)("div",{className:"border rounded-lg p-6 space-y-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Partnership minimum fields"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Partner details are required before submission."}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Partners (one per line)"}),r.jsx("textarea",{value:D,onChange:e=>k(e.target.value),disabled:!T||p.isPending,className:"w-full min-h-24 p-2 border rounded-md disabled:opacity-50",placeholder:"Jane Doe\\nAisha Khan"})]})]}),"TRUST"===t.type&&(0,r.jsxs)("div",{className:"border rounded-lg p-6 space-y-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Trust minimum fields"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Trustee details are required before submission."}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Trustees (one per line)"}),r.jsx("textarea",{value:q,onChange:e=>w(e.target.value),disabled:!T||p.isPending,className:"w-full min-h-24 p-2 border rounded-md disabled:opacity-50",placeholder:"Jane Doe\\nAisha Khan"})]})]}),(0,r.jsxs)("div",{className:"border rounded-lg p-6 space-y-3",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Raw data"}),r.jsx("pre",{className:"text-xs bg-slate-50 border rounded-md p-4 overflow-auto",children:JSON.stringify(t.data??{},null,2)})]})]}):(0,r.jsxs)("div",{className:"py-8 space-y-4",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Registration not found."}),r.jsx(i.default,{href:"/dashboard/formation",className:"text-sm text-primary hover:underline",children:"Back to Formation Studio"})]})}},68898:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`C:\Users\mutir\OneDrive\Desktop\mari\athena-platform\client\src\app\dashboard\formation\[id]\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[2145,108,8759,9835,422,5877],()=>t(69643));module.exports=r})();