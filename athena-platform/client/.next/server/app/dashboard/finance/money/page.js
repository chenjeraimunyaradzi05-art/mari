(()=>{var e={};e.id=5146,e.ids=[5146],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},97528:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o}),r(72114),r(22834),r(77972),r(10704),r(7629),r(11930),r(12523);var a=r(23191),s=r(88716),n=r(37922),i=r.n(n),d=r(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(t,l);let o=["",{children:["dashboard",{children:["finance",{children:["money",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,72114)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\finance\\money\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,22834)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,77972)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,10704)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\not-found.tsx"]}],c=["C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\finance\\money\\page.tsx"],x="/dashboard/finance/money/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/finance/money/page",pathname:"/dashboard/finance/money",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},82350:(e,t,r)=>{Promise.resolve().then(r.bind(r,5575))},5575:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(10326),s=r(17577),n=r(90434),i=r(18069),d=r(51223);function l(){let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0),[o,c]=(0,s.useState)(!1),[x,u]=(0,s.useState)(null),[m,p]=(0,s.useState)({organizationId:"",amount:"",currency:"AUD",type:"PAYMENT",status:"PENDING",provider:"",reference:""}),[g,h]=(0,s.useState)(null),[y,b]=(0,s.useState)({status:"PENDING",provider:"",reference:""}),v=async()=>{let e=await i.hi.get("/money/transactions");t(e.data?.data||[])},f=async()=>{let r=Number(m.amount||0);if(!Number.isFinite(r)||r<=0){u("Amount must be greater than 0");return}c(!0),u(null),t([{id:`tmp-${Date.now()}`,createdAt:new Date().toISOString(),type:m.type,amount:r,currency:m.currency,status:m.status},...e]);try{await i.hi.post("/money/transactions",{organizationId:m.organizationId||void 0,amount:r,currency:m.currency,type:m.type,status:m.status,provider:m.provider||void 0,reference:m.reference||void 0}),p({organizationId:"",amount:"",currency:"AUD",type:"PAYMENT",status:"PENDING",provider:"",reference:""}),await v()}catch(r){t(e),u(r?.response?.data?.error||"Failed to create transaction")}finally{c(!1)}},j=async(r,a)=>{t(e.map(e=>e.id===r?{...e,status:a}:e));try{await i.hi.patch(`/money/transactions/${r}`,{status:a}),await v()}catch(r){t(e),u(r?.response?.data?.error||"Failed to update transaction")}},N=async r=>{if(confirm("Delete this transaction?")){t(e.filter(e=>e.id!==r));try{await i.hi.delete(`/money/transactions/${r}`),await v()}catch(r){t(e),u(r?.response?.data?.error||"Failed to delete transaction")}}},k=e=>{h(e.id),b({status:e.status||"PENDING",provider:e.provider||"",reference:e.reference||""})},D=async()=>{if(g){t(e.map(e=>e.id===g?{...e,status:y.status,provider:y.provider,reference:y.reference}:e));try{await i.hi.patch(`/money/transactions/${g}`,{status:y.status,provider:y.provider||void 0,reference:y.reference||void 0}),h(null),await v()}catch(r){t(e),u(r?.response?.data?.error||"Failed to update transaction")}}};return(0,a.jsxs)("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Money Ledger"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Review payments, payouts, and adjustments."})]}),a.jsx(n.default,{href:"/dashboard/finance",className:"text-sm text-primary-600 hover:underline",children:"Back to Finance Hub"})]}),(0,a.jsxs)("div",{className:"card",children:[x&&a.jsx("div",{className:"mb-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:x}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Organization ID (optional)"}),a.jsx("input",{value:m.organizationId,onChange:e=>p({...m,organizationId:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amount"}),a.jsx("input",{value:m.amount,onChange:e=>p({...m,amount:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Currency"}),a.jsx("input",{value:m.currency,onChange:e=>p({...m,currency:e.target.value.toUpperCase()}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type"}),a.jsx("select",{value:m.type,onChange:e=>p({...m,type:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",children:["PAYMENT","REFUND","PAYOUT","TRANSFER","ADJUSTMENT"].map(e=>a.jsx("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status"}),a.jsx("select",{value:m.status,onChange:e=>p({...m,status:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",children:["PENDING","COMPLETED","FAILED","CANCELED"].map(e=>a.jsx("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Provider"}),a.jsx("input",{value:m.provider,onChange:e=>p({...m,provider:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reference"}),a.jsx("input",{value:m.reference,onChange:e=>p({...m,reference:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]})]}),a.jsx("button",{className:"btn-primary",onClick:f,disabled:o,children:o?"Saving...":"Create Transaction"})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Transactions"})}),r?a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading transactions..."}):0===e.length?a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No transactions logged."}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[a.jsx("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Date"}),a.jsx("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Type"}),a.jsx("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Amount"}),a.jsx("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Status"}),a.jsx("th",{className:"text-right py-2 text-xs font-semibold text-gray-500",children:"Actions"})]})}),a.jsx("tbody",{children:e.slice(0,8).map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[a.jsx("td",{className:"py-2 text-sm text-gray-900 dark:text-white",children:(0,d.p6)(e.createdAt)}),a.jsx("td",{className:"py-2 text-sm text-gray-600 dark:text-gray-300",children:e.type}),a.jsx("td",{className:"py-2 text-sm text-gray-600 dark:text-gray-300",children:(0,d.xG)(e.amount||0,e.currency||"AUD")}),a.jsx("td",{className:"py-2 text-xs text-gray-500 dark:text-gray-400",children:g===e.id?a.jsx("select",{value:y.status,onChange:e=>b({...y,status:e.target.value}),className:"rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-2 py-1 text-xs",children:["PENDING","COMPLETED","FAILED","CANCELED"].map(e=>a.jsx("option",{value:e,children:e},e))}):e.status}),a.jsx("td",{className:"py-2 text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[g===e.id?(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:D,className:"text-xs text-primary-600 hover:underline",children:"Save"}),a.jsx("button",{onClick:()=>h(null),className:"text-xs text-gray-500 hover:underline",children:"Cancel"})]}):(0,a.jsxs)(a.Fragment,{children:["COMPLETED"!==e.status&&a.jsx("button",{onClick:()=>j(e.id,"COMPLETED"),className:"text-xs text-primary-600 hover:underline",children:"Mark Completed"}),a.jsx("button",{onClick:()=>k(e),className:"text-xs text-gray-600 hover:underline",children:"Edit"})]}),a.jsx("button",{onClick:()=>N(e.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]})})]},e.id))})]})})]})]})}},72114:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`C:\Users\mutir\OneDrive\Desktop\mari\athena-platform\client\src\app\dashboard\finance\money\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[2145,108,8759,9835,422,5877],()=>r(97528));module.exports=a})();