(()=>{var e={};e.id=661,e.ids=[661],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},16025:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>o,routeModule:()=>g,tree:()=>c}),r(34645),r(22834),r(77972),r(10704),r(7629),r(11930),r(12523);var a=r(23191),s=r(88716),n=r(37922),i=r.n(n),d=r(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(t,l);let c=["",{children:["dashboard",{children:["finance",{children:["accounting",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,34645)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\finance\\accounting\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,22834)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,77972)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,10704)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\not-found.tsx"]}],o=["C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\dashboard\\finance\\accounting\\page.tsx"],x="/dashboard/finance/accounting/page",u={require:r,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/finance/accounting/page",pathname:"/dashboard/finance/accounting",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},98496:(e,t,r)=>{Promise.resolve().then(r.bind(r,87053))},87053:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(10326),s=r(17577),n=r(90434),i=r(18069),d=r(51223);function l(){let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)([]),[c,o]=(0,s.useState)(!0),[x,u]=(0,s.useState)(null),[g,m]=(0,s.useState)(!1),[p,h]=(0,s.useState)({organizationId:"",name:"",code:"",type:"ASSET",currency:"AUD"}),[y,b]=(0,s.useState)({organizationId:"",description:"",reference:"",entryDate:"",status:"DRAFT",debitAccountId:"",creditAccountId:"",amount:""}),[j,v]=(0,s.useState)(null),[N,f]=(0,s.useState)({name:"",code:"",type:"ASSET",currency:"AUD"}),[k,w]=(0,s.useState)(null),[D,A]=(0,s.useState)({description:"",reference:"",entryDate:""}),C=async()=>{let[e,r]=await Promise.all([i.hi.get("/accounting/accounts"),i.hi.get("/accounting/journals")]);t(e.data?.data||[]),l(r.data?.data||[])},S=async()=>{if(!p.name.trim()){u("Account name is required");return}m(!0),u(null),t([{id:`tmp-${Date.now()}`,name:p.name,code:p.code,type:p.type,currency:p.currency||"AUD"},...e]);try{await i.hi.post("/accounting/accounts",{organizationId:p.organizationId||void 0,name:p.name,code:p.code||void 0,type:p.type,currency:p.currency||void 0}),h({organizationId:"",name:"",code:"",type:"ASSET",currency:"AUD"}),await C()}catch(r){t(e),u(r?.response?.data?.error||"Failed to create account")}finally{m(!1)}},I=async()=>{if(!y.description.trim()){u("Journal description is required");return}if(!y.debitAccountId||!y.creditAccountId){u("Debit and credit accounts are required");return}let e=Number(y.amount||0);if(!Number.isFinite(e)||e<=0){u("Amount must be greater than 0");return}m(!0),u(null),l([{id:`tmp-${Date.now()}`,description:y.description,entryDate:y.entryDate||new Date().toISOString(),status:y.status},...r]);try{await i.hi.post("/accounting/journals",{organizationId:y.organizationId||void 0,description:y.description,reference:y.reference||void 0,entryDate:y.entryDate||void 0,status:y.status,lines:[{accountId:y.debitAccountId,debit:e,credit:0},{accountId:y.creditAccountId,debit:0,credit:e}]}),b({organizationId:"",description:"",reference:"",entryDate:"",status:"DRAFT",debitAccountId:"",creditAccountId:"",amount:""}),await C()}catch(e){l(r),u(e?.response?.data?.error||"Failed to create journal entry")}finally{m(!1)}},E=async r=>{if(confirm("Delete this account?")){t(e.filter(e=>e.id!==r));try{await i.hi.delete(`/accounting/accounts/${r}`),await C()}catch(r){t(e),u(r?.response?.data?.error||"Failed to delete account")}}},P=e=>{v(e.id),f({name:e.name||"",code:e.code||"",type:e.type||"ASSET",currency:e.currency||"AUD"})},q=async()=>{if(j){if(!N.name.trim()){u("Account name is required");return}t(e.map(e=>e.id===j?{...e,...N}:e));try{await i.hi.patch(`/accounting/accounts/${j}`,{name:N.name,code:N.code||void 0,type:N.type,currency:N.currency}),v(null),await C()}catch(r){t(e),u(r?.response?.data?.error||"Failed to update account")}}},T=async e=>{l(r.map(t=>t.id===e?{...t,status:"POSTED"}:t));try{await i.hi.post(`/accounting/journals/${e}/post`),await C()}catch(e){l(r),u(e?.response?.data?.error||"Failed to post journal entry")}},U=async e=>{if(confirm("Void this journal entry?")){l(r.map(t=>t.id===e?{...t,status:"VOID"}:t));try{await i.hi.post(`/accounting/journals/${e}/void`),await C()}catch(e){l(r),u(e?.response?.data?.error||"Failed to void journal entry")}}},O=e=>{w(e.id),A({description:e.description||"",reference:e.reference||"",entryDate:e.entryDate?new Date(e.entryDate).toISOString().slice(0,10):""})},F=async()=>{if(k){if(!D.description.trim()){u("Journal description is required");return}l(r.map(e=>e.id===k?{...e,description:D.description}:e));try{await i.hi.patch(`/accounting/journals/${k}`,{description:D.description,reference:D.reference||void 0,entryDate:D.entryDate||void 0}),w(null),await C()}catch(e){l(r),u(e?.response?.data?.error||"Failed to update journal entry")}}};return(0,a.jsxs)("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Accounting"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage your chart of accounts and journal entries."})]}),a.jsx(n.default,{href:"/dashboard/finance",className:"text-sm text-primary-600 hover:underline",children:"Back to Finance Hub"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"card",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Accounts"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:c?"—":e.length})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Journal Entries"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:c?"—":r.length})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Status"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:c?"Loading":"Ready"})]})]}),x&&a.jsx("div",{className:"card border border-red-200 bg-red-50 text-sm text-red-700",children:x}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"card space-y-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Account"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Organization ID (optional)"}),a.jsx("input",{value:p.organizationId,onChange:e=>h({...p,organizationId:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",placeholder:"org_123"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Account Name"}),a.jsx("input",{value:p.name,onChange:e=>h({...p,name:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",placeholder:"Cash on Hand"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Account Code"}),a.jsx("input",{value:p.code,onChange:e=>h({...p,code:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",placeholder:"1000"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type"}),a.jsx("select",{value:p.type,onChange:e=>h({...p,type:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",children:["ASSET","LIABILITY","EQUITY","REVENUE","EXPENSE"].map(e=>a.jsx("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Currency"}),a.jsx("input",{value:p.currency,onChange:e=>h({...p,currency:e.target.value.toUpperCase()}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",placeholder:"AUD"})]})]}),a.jsx("button",{className:"btn-primary",onClick:S,disabled:g,children:g?"Saving...":"Create Account"})]}),(0,a.jsxs)("div",{className:"card space-y-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Journal Entry"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Organization ID (optional)"}),a.jsx("input",{value:y.organizationId,onChange:e=>b({...y,organizationId:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",placeholder:"org_123"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Description"}),a.jsx("input",{value:y.description,onChange:e=>b({...y,description:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",placeholder:"Monthly subscription revenue"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reference"}),a.jsx("input",{value:y.reference,onChange:e=>b({...y,reference:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",placeholder:"INV-1001"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Entry Date"}),a.jsx("input",{type:"date",value:y.entryDate,onChange:e=>b({...y,entryDate:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Debit Account"}),(0,a.jsxs)("select",{value:y.debitAccountId,onChange:e=>b({...y,debitAccountId:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"Select account"}),e.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Credit Account"}),(0,a.jsxs)("select",{value:y.creditAccountId,onChange:e=>b({...y,creditAccountId:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"Select account"}),e.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amount"}),a.jsx("input",{value:y.amount,onChange:e=>b({...y,amount:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",placeholder:"0.00"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Status"}),(0,a.jsxs)("select",{value:y.status,onChange:e=>b({...y,status:e.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",children:[a.jsx("option",{value:"DRAFT",children:"DRAFT"}),a.jsx("option",{value:"POSTED",children:"POSTED"})]})]})]}),a.jsx("button",{className:"btn-primary",onClick:I,disabled:g,children:g?"Saving...":"Create Journal Entry"})]})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Journal Entries"})}),c?a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading entries..."}):0===r.length?a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No journal entries yet."}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[a.jsx("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Date"}),a.jsx("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Description"}),a.jsx("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Status"}),a.jsx("th",{className:"text-right py-2 text-xs font-semibold text-gray-500",children:"Actions"})]})}),a.jsx("tbody",{children:r.slice(0,6).map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[a.jsx("td",{className:"py-2 text-sm text-gray-900 dark:text-white",children:(0,d.p6)(e.entryDate||e.createdAt)}),a.jsx("td",{className:"py-2 text-sm text-gray-600 dark:text-gray-300",children:k===e.id?a.jsx("input",{value:D.description,onChange:e=>A({...D,description:e.target.value}),className:"w-full rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-2 py-1 text-sm"}):e.description}),a.jsx("td",{className:"py-2 text-xs text-gray-500 dark:text-gray-400",children:e.status}),a.jsx("td",{className:"py-2 text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[k===e.id?(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:F,className:"text-xs text-primary-600 hover:underline",children:"Save"}),a.jsx("button",{onClick:()=>w(null),className:"text-xs text-gray-500 hover:underline",children:"Cancel"})]}):"DRAFT"===e.status&&a.jsx("button",{onClick:()=>O(e),className:"text-xs text-gray-600 hover:underline",children:"Edit"}),"DRAFT"===e.status&&a.jsx("button",{onClick:()=>T(e.id),className:"text-xs text-primary-600 hover:underline",children:"Post"}),"POSTED"===e.status&&a.jsx("button",{onClick:()=>U(e.id),className:"text-xs text-red-600 hover:underline",children:"Void"})]})})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Accounts"})}),c?a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading accounts..."}):0===e.length?a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No accounts yet."}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[a.jsx("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Name"}),a.jsx("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Type"}),a.jsx("th",{className:"text-left py-2 text-xs font-semibold text-gray-500",children:"Currency"}),a.jsx("th",{className:"text-right py-2 text-xs font-semibold text-gray-500",children:"Actions"})]})}),a.jsx("tbody",{children:e.slice(0,8).map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[a.jsx("td",{className:"py-2 text-sm text-gray-900 dark:text-white",children:j===e.id?a.jsx("input",{value:N.name,onChange:e=>f({...N,name:e.target.value}),className:"w-full rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-2 py-1 text-sm"}):e.name}),a.jsx("td",{className:"py-2 text-sm text-gray-600 dark:text-gray-300",children:j===e.id?a.jsx("select",{value:N.type,onChange:e=>f({...N,type:e.target.value}),className:"rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-2 py-1 text-sm",children:["ASSET","LIABILITY","EQUITY","REVENUE","EXPENSE"].map(e=>a.jsx("option",{value:e,children:e},e))}):e.type}),a.jsx("td",{className:"py-2 text-sm text-gray-600 dark:text-gray-300",children:j===e.id?a.jsx("input",{value:N.currency,onChange:e=>f({...N,currency:e.target.value.toUpperCase()}),className:"w-full rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-2 py-1 text-sm"}):e.currency}),a.jsx("td",{className:"py-2 text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[j===e.id?(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:q,className:"text-xs text-primary-600 hover:underline",children:"Save"}),a.jsx("button",{onClick:()=>v(null),className:"text-xs text-gray-500 hover:underline",children:"Cancel"})]}):a.jsx("button",{onClick:()=>P(e),className:"text-xs text-gray-600 hover:underline",children:"Edit"}),a.jsx("button",{onClick:()=>E(e.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]})})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Trial Balance Snapshot"}),a.jsx("button",{className:"btn-outline text-sm",disabled:!0,children:"Refresh (coming soon)"})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Trial balance will appear once journal entries are posted."})]})]})}},34645:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`C:\Users\mutir\OneDrive\Desktop\mari\athena-platform\client\src\app\dashboard\finance\accounting\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[2145,108,8759,9835,422,5877],()=>r(16025));module.exports=a})();