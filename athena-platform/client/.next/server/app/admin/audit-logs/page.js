(()=>{var e={};e.id=6773,e.ids=[6773],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},43699:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o}),r(87522),r(10704),r(7629),r(11930),r(12523);var a=r(23191),s=r(88716),i=r(37922),n=r.n(i),l=r(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o=["",{children:["admin",{children:["audit-logs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,87522)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\admin\\audit-logs\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,10704)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\not-found.tsx"]}],c=["C:\\Users\\mutir\\OneDrive\\Desktop\\mari\\athena-platform\\client\\src\\app\\admin\\audit-logs\\page.tsx"],x="/admin/audit-logs/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/audit-logs/page",pathname:"/admin/audit-logs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},32466:(e,t,r)=>{Promise.resolve().then(r.bind(r,87094))},11890:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(76557).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},39183:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(76557).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},36283:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(76557).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},87094:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(10326),s=r(17577),i=r(90434),n=r(20108);let l=(0,r(76557).Z)("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);var d=r(11890),o=r(36283),c=r(39183),x=r(91664),p=r(41190),m=r(18069);function u(e){if(!e)return"—";let t=`${e.firstName} ${e.lastName}`.trim();return t?`${t} (${e.email})`:e.email}function h(e,t){return e.length<=t?e:`${e.slice(0,t)}…`}function g(){let[e,t]=(0,s.useState)(1),[r,g]=(0,s.useState)(""),[y,v]=(0,s.useState)(""),[j,f]=(0,s.useState)(""),N=(0,s.useMemo)(()=>{let t=new URLSearchParams({page:e.toString(),limit:"50"});return r&&t.append("action",r),y.trim()&&t.append("actorUserId",y.trim()),j.trim()&&t.append("targetUserId",j.trim()),t.toString()},[e,r,y,j]),{data:b,isLoading:A,error:k}=(0,n.a)({queryKey:["admin-audit-logs",e,r,y,j],queryFn:async()=>(await m.hi.get(`/admin/audit-logs?${N}`)).data});return k?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(l,{className:"h-12 w-12 text-red-500 mx-auto mb-3"}),a.jsx("h1",{className:"text-xl font-semibold text-red-600",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have permission to access this page."}),a.jsx("div",{className:"mt-4",children:a.jsx(x.z,{asChild:!0,variant:"outline",children:a.jsx(i.default,{href:"/admin",children:"Back to Admin"})})})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("header",{className:"bg-white dark:bg-gray-800 shadow",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(i.default,{href:"/admin",className:"text-gray-500 hover:text-gray-700",children:a.jsx(d.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Audit Logs"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Compliance exports and account deletions"})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)("select",{value:r,onChange:e=>{g(e.target.value),t(1)},className:"px-3 py-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"",children:"All Actions"}),a.jsx("option",{value:"DSAR_EXPORT",children:"DSAR Export"}),a.jsx("option",{value:"ACCOUNT_DELETE",children:"Account Delete"}),a.jsx("option",{value:"ADMIN_USER_UPDATE",children:"Admin: User Update"}),a.jsx("option",{value:"ADMIN_USER_DELETE",children:"Admin: User Delete"}),a.jsx("option",{value:"ADMIN_POST_HIDE",children:"Admin: Post Hide"}),a.jsx("option",{value:"ADMIN_POST_UNHIDE",children:"Admin: Post Unhide"}),a.jsx("option",{value:"ADMIN_POST_DELETE",children:"Admin: Post Delete"}),a.jsx("option",{value:"ADMIN_POST_CLEAR_REPORTS",children:"Admin: Clear Reports"}),a.jsx("option",{value:"ADMIN_COMMENT_DELETE",children:"Admin: Comment Delete"}),a.jsx("option",{value:"ADMIN_GROUP_CREATE",children:"Admin: Group Create"}),a.jsx("option",{value:"ADMIN_GROUP_UPDATE",children:"Admin: Group Update"}),a.jsx("option",{value:"ADMIN_GROUP_DELETE",children:"Admin: Group Delete"}),a.jsx("option",{value:"ADMIN_GROUP_MEMBER_ROLE_UPDATE",children:"Admin: Group Role"}),a.jsx("option",{value:"ADMIN_GROUP_POST_DELETE",children:"Admin: Group Post Delete"}),a.jsx("option",{value:"ADMIN_EVENT_CREATE",children:"Admin: Event Create"}),a.jsx("option",{value:"ADMIN_EVENT_UPDATE",children:"Admin: Event Update"}),a.jsx("option",{value:"ADMIN_EVENT_DELETE",children:"Admin: Event Delete"}),a.jsx("option",{value:"ADMIN_JOB_UPDATE",children:"Admin: Job Update"}),a.jsx("option",{value:"ADMIN_SUBSCRIPTION_UPDATE",children:"Admin: Subscription Update"}),a.jsx("option",{value:"ADMIN_SUBSCRIPTION_GRANT",children:"Admin: Subscription Grant"})]}),a.jsx("div",{className:"flex-1 min-w-[240px]",children:a.jsx(p.I,{placeholder:"Actor User ID (optional)",value:y,onChange:e=>{v(e.target.value),t(1)}})}),a.jsx("div",{className:"flex-1 min-w-[240px]",children:a.jsx(p.I,{placeholder:"Target User ID (optional)",value:j,onChange:e=>{f(e.target.value),t(1)}})})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:A?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"When"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actor"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Target"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Agent"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metadata"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[b?.logs.map(e=>{let t=e.userAgent||"",r=e.metadata?h(JSON.stringify(e.metadata),180):"—";return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300",children:new Date(e.createdAt).toLocaleString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx(o.Z,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.action})]})}),a.jsxs("td",{className:"px-6 py-4 text-sm text-gray-700 dark:text-gray-300",children:[a.jsx("div",{className:"max-w-[280px] break-words",children:u(e.actorUser)}),e.actorUserId&&!e.actorUser&&a.jsx("div",{className:"text-xs text-gray-500",children:e.actorUserId})]}),a.jsxs("td",{className:"px-6 py-4 text-sm text-gray-700 dark:text-gray-300",children:[a.jsx("div",{className:"max-w-[280px] break-words",children:u(e.targetUser)}),e.targetUserId&&!e.targetUser&&a.jsx("div",{className:"text-xs text-gray-500",children:e.targetUserId})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 dark:text-gray-300",children:e.ipAddress||"—"}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-700 dark:text-gray-300",children:a.jsx("span",{title:t,children:t?h(t,80):"—"})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-700 dark:text-gray-300",children:a.jsx("div",{className:"max-w-[360px] break-words",title:e.metadata?JSON.stringify(e.metadata):"",children:r})})]},e.id)}),b?.logs.length===0&&a.jsx("tr",{children:a.jsx("td",{className:"px-6 py-10 text-center text-sm text-gray-500",colSpan:7,children:"No audit logs found."})})]})]})}),b&&b.pagination.totalPages>1&&(0,a.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Page ",b.pagination.page," of ",b.pagination.totalPages]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(x.z,{variant:"outline",size:"sm",disabled:1===e,onClick:()=>t(e-1),children:a.jsx(d.Z,{className:"h-4 w-4"})}),a.jsx(x.z,{variant:"outline",size:"sm",disabled:e>=b.pagination.totalPages,onClick:()=>t(e+1),children:a.jsx(c.Z,{className:"h-4 w-4"})})]})]})]})]})}},91664:(e,t,r)=>{"use strict";r.d(t,{d:()=>l,z:()=>d});var a=r(10326),s=r(17577),i=r(79360),n=r(51223);let l=(0,i.j)("inline-flex items-center justify-center rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary-500 text-white hover:bg-primary-600",secondary:"bg-secondary-500 text-white hover:bg-secondary-600",outline:"border-2 border-primary-500 text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-950",ghost:"hover:bg-gray-100 dark:hover:bg-gray-800",link:"text-primary-500 underline-offset-4 hover:underline",destructive:"bg-red-500 text-white hover:bg-red-600"},size:{default:"h-10 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-12 px-6 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef(({className:e,variant:t,size:r,...s},i)=>a.jsx("button",{className:(0,n.cn)(l({variant:t,size:r,className:e})),ref:i,...s}));d.displayName="Button"},41190:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var a=r(10326),s=r(17577),i=r(51223);let n=s.forwardRef(({className:e,type:t,error:r,label:s,icon:n,...l},d)=>(0,a.jsxs)("div",{className:"w-full",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s}),(0,a.jsxs)("div",{className:"relative",children:[n&&a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n}),a.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50",n&&"pl-10",r&&"border-red-500 focus:ring-red-500",e),ref:d,...l})]}),r&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:r})]}));n.displayName="Input"},87522:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`C:\Users\mutir\OneDrive\Desktop\mari\athena-platform\client\src\app\admin\audit-logs\page.tsx#default`)},79360:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});var a=r(41135);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=a.W,n=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return i(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:n,defaultVariants:l}=t,d=Object.keys(n).map(e=>{let t=null==r?void 0:r[e],a=null==l?void 0:l[e];if(null===t)return null;let i=s(t)||s(a);return n[e][i]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return i(e,d,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...o}[t]):({...l,...o})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[2145,108,9835],()=>r(43699));module.exports=a})();