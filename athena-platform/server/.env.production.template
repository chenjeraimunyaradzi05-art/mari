# ===========================================
# ATHENA SERVER - PRODUCTION ENVIRONMENT
# ===========================================
# INSTRUCTIONS:
# 1. Copy this file to your deployment platform (Render/Railway/Heroku)
# 2. Replace ALL placeholder values with real credentials
# 3. Never commit this file with real values to git
# ===========================================

# ───────────────────────────────────────────
# APPLICATION SETTINGS
# ───────────────────────────────────────────
NODE_ENV=production
PORT=5000
LOG_LEVEL=info

# Your deployed backend URL (e.g., https://athena-api.onrender.com)
API_URL=https://api.your-domain.com

# Your deployed frontend URL (for CORS)
CLIENT_URL=https://your-domain.com

# Comma-separated allowed origins for CORS
ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com

# Required when behind a load balancer/proxy (Render, Railway, etc.)
TRUST_PROXY=true

# ───────────────────────────────────────────
# DATABASE (PostgreSQL)
# ───────────────────────────────────────────
# Recommended providers: Neon, Supabase, Railway, AWS RDS
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?sslmode=require
DATABASE_URL=postgresql://user:password@host:5432/athena_prod?sslmode=require

# ───────────────────────────────────────────
# REDIS (Caching & Job Queues)
# ───────────────────────────────────────────
# Recommended providers: Upstash, Redis Cloud, AWS ElastiCache
# Format: redis://[:password@]host:port[/db-number]
REDIS_URL=redis://default:password@host:6379

# ───────────────────────────────────────────
# AUTHENTICATION (JWT)
# ───────────────────────────────────────────
# CRITICAL: Generate a secure random string (min 32 characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=CHANGE_THIS_TO_A_SECURE_RANDOM_STRING_MIN_32_CHARS

# Token expiration
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# ───────────────────────────────────────────
# EMAIL (SendGrid)
# ───────────────────────────────────────────
# Get API key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=your_sendgrid_api_key_here
SENDGRID_FROM_EMAIL=noreply@your-domain.com
SENDGRID_FROM_NAME=Athena

# ───────────────────────────────────────────
# PAYMENTS (Stripe)
# ───────────────────────────────────────────
# IMPORTANT: Use LIVE keys for production (sk_live_, pk_live_)
# Get keys from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key_here

# Webhook signing secret - set up at: https://dashboard.stripe.com/webhooks
# Endpoint URL: https://api.your-domain.com/api/webhooks/stripe
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret_here

# ───────────────────────────────────────────
# AI SERVICES (OpenAI)
# ───────────────────────────────────────────
# Get API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# Model configuration
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4096

# ───────────────────────────────────────────
# FILE STORAGE (AWS S3)
# ───────────────────────────────────────────
# Create an IAM user with S3 permissions
AWS_ACCESS_KEY_ID=your_aws_access_key_id_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key_here
AWS_REGION=eu-west-2
AWS_BUCKET_NAME=athena-uploads-prod

# Optional: CloudFront CDN URL for faster delivery
# AWS_CDN_URL=https://dxxxxxxxxxx.cloudfront.net

# ───────────────────────────────────────────
# SEARCH (OpenSearch)
# ───────────────────────────────────────────
# Leave empty to disable, or provide OpenSearch/Elasticsearch URL
OPENSEARCH_URL=
OPENSEARCH_INDEX_PREFIX=athena_prod_

# ───────────────────────────────────────────
# RATE LIMITING
# ───────────────────────────────────────────
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100

# Stricter limits for auth endpoints
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX=10

# ───────────────────────────────────────────
# MONITORING & OBSERVABILITY
# ───────────────────────────────────────────
# Metrics endpoint protection (optional)
METRICS_TOKEN=

# Sentry error tracking (optional but recommended)
SENTRY_DSN=

# ───────────────────────────────────────────
# FEATURE FLAGS
# ───────────────────────────────────────────
ENABLE_AI_FEATURES=true
ENABLE_SOCIAL_LOGIN=false
ENABLE_PAYMENT_FEATURES=true
ENABLE_VIDEO_UPLOAD=true

# ───────────────────────────────────────────
# REGIONAL SETTINGS
# ───────────────────────────────────────────
DEFAULT_REGION=UK_EU
SUPPORTED_REGIONS=UK_EU,US,SEA,MEA,ROW
